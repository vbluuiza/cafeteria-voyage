<!-- Inicio do Código do Pedido | By: Lucca -->
{% extends 'layout.html' %}

    {% block title %}
        Cafeteria Voyage
    {% endblock %}

    {% block style %}
        <link rel="stylesheet" href="{{ url_for('static', filename='css/item.css') }}">
    {% endblock %}


{% block content %}
        <nav class="navbar bg-body-tertiary py-0">
        <div class="container-fluid px-3 border-bottom d-flex align-items-center py-2">
            <div class="d-flex">
                <a class="navbar-toggler border-0 px-0" type="button" href="/cardapio">
                    <span class="bi bi-arrow-left"></span>
                </a>
                <h4 class="mb-0 ps-4">{{ item.nome }}</h4>
            </div>
            <img src="{{ url_for('static', filename='img/M_img.png') }}" alt="">
        </div>
    </nav>

    <div class="product-header">
        <img id="detail-image" src="{{ url_for('static', filename='img/itens_cardapio/' ~ item.nome|lower|replace(' ', '_') ~ '.jpg') }}" class="produto-image" alt="{{ item.nome }}">
    </div>

    <div class="px-3">
        <h3 class="mt-2 fw-bold fs-2" id="detail-title"></h3>
        <p class="d-none" id="item_id">{{ item.id }}</p>
        <p id="detail-description" class="text-muted"></p>
        <p class="fw-medium fs-5 text-success" id="detail-price"></p>
    </div>

    <div class="d-flex align-items-center justify-content-between bg-light pt-2 px-3">
        <div>
            <h4 class="fw-bold">Escolha a quantidade:</h4>
            <p>Escolha 1 dos opcionais</p>
        </div>
        <div><span class="badge text-bg-dark">OBRIGATÓRIO</span></div>
    </div>

    <div class="px-3" id="options-container">
        {% if item.opcional %}
            <form id="opcionais-form" class="mt-3">
                <p class="fw-medium mb-2">Escolha uma opção:</p>
                {% for opcao in item.opcional.replace(' ou/e ', ',').split(',') %}
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="opcional" id="opcional_{{ loop.index }}" value="{{ opcao }}">
                        <label class="form-check-label" for="opcional_{{ loop.index }}">
                            {{ opcao }}
                        </label>
                    </div>
                {% endfor %}
            </form>
        {% else %}
            <p class="mt-3 text-muted">Sem opcionais disponíveis.</p>
        {% endif %}
    </div>
        
    </div>
    <div class="px-3 observacao_section">
        <div class="d-flex justify-content-between align-items-center pb-2 pt-4">
            <h4 class="fw-bold">Alguma observação?</h4>
            <p class="mb-0 mini-text">0/140</p>
        </div>
        <textarea class="notes-textarea" placeholder="Ex: Café mais fraco..." maxlength="140"></textarea>
    </div>

    <div class="fixed-bottom d-flex px-3 pt-4 bg-light pb-3">
        <a type="button" class="btn btn-primary w-50" href="/cardapio/fazer_pedido">
            Adicionar
        </a>
        <div class="w-50 d-flex align-items-center justify-content-center">
             <h4 class="pb-0 fw-medium fs-5 detail-price-static">R$ {{ "%.2f"|format(item.preco) }}</h4>
        </div>
    </div>
{% endblock %}

    {% block scripts %}
        <script src="{{ url_for('static', filename='js/item.js') }}" defer></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
        <script src="{{ url_for('static', filename='js/pedidos_card_select.js') }}"></script>
    {% endblock %}
